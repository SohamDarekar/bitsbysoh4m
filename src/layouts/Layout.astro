---
const isProd = import.meta.env.PROD;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<title>bitsbysoh4m</title>

		{isProd && (
			<>
				<script async src="https://www.googletagmanager.com/gtag/js?id=G-P300W8XW2"></script>
				<script>
					{`
						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments);}
						gtag('js', new Date());
						gtag('config', 'G-P300W8XW2', { send_page_view: false });
					`}
				</script>
			</>
		)}
	</head>
	<body>
		<slot />
		{isProd && (
			<script>
				{`
					const sendPageView = () => {
						gtag('event', 'page_view', {
							page_location: window.location.href,
							page_path: window.location.pathname,
							page_title: document.title
						});
					};
					// Send initial page view
					sendPageView();

					// Re-send on client-side navigation
					document.addEventListener('astro:after-swap', sendPageView);
				`}
			</script>
		)}
	</body>
</html>

<style>
	html, body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
</style>
